{
  "openapi": "3.0.3",
  "info": {
    "title": "Intercity Taxi API",
    "description": "REST API for Driver and Passenger mobile applications",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "\nAPIs for user authentication via phone OTP"
    },
    {
      "name": "Passenger",
      "description": "\nAPIs for passenger profile management"
    },
    {
      "name": "Driver",
      "description": "\nAPIs for driver registration and profile management"
    },
    {
      "name": "Device",
      "description": "\nAPIs for managing push notification device tokens"
    },
    {
      "name": "Driver Documents",
      "description": "\nAPIs for managing driver documents (passport, medical certificate, etc.)"
    }
  ],
  "components": {
    "securitySchemes": {
      "default": {
        "type": "http",
        "scheme": "bearer",
        "description": "Get your token via `POST /api/v1/auth/verify-otp` after OTP verification."
      }
    }
  },
  "security": [
    {
      "default": []
    }
  ],
  "paths": {
    "/api/v1/auth/send-otp": {
      "post": {
        "summary": "Send OTP",
        "operationId": "sendOTP",
        "description": "Send a one-time password to the specified phone number.\nThe OTP is valid for 5 minutes and allows up to 5 verification attempts.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "message": "Verification code sent",
                      "expires_in": 300
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Verification code sent"
                        },
                        "expires_in": {
                          "type": "integer",
                          "example": 300
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid phone format",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Validation failed",
                    "errors": {
                      "phone": [
                        "Phone must be in US format: +1XXXXXXXXXX"
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed"
                    },
                    "errors": {
                      "type": "object",
                      "properties": {
                        "phone": {
                          "type": "array",
                          "example": [
                            "Phone must be in US format: +1XXXXXXXXXX"
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limited",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Please wait 45 seconds before requesting a new code"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Please wait 45 seconds before requesting a new code"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "phone": {
                    "type": "string",
                    "description": "Phone number in US format (+1XXXXXXXXXX).",
                    "example": "+12025551234"
                  }
                },
                "required": [
                  "phone"
                ]
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/v1/auth/verify-otp": {
      "post": {
        "summary": "Verify OTP",
        "operationId": "verifyOTP",
        "description": "Verify the OTP code and receive an authentication token.\nIf the user doesn't exist, a new account will be created automatically.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "description": "Success - existing user",
                      "type": "object",
                      "example": {
                        "success": true,
                        "data": {
                          "user": {
                            "uuid": "550e8400-e29b-41d4-a716-446655440000",
                            "name": "John Doe",
                            "email": "john@example.com",
                            "phone": "+12025551234",
                            "avatar": null,
                            "locale": "en",
                            "timezone": "America/New_York",
                            "phone_verified": true,
                            "email_verified": false,
                            "roles": [
                              "passenger"
                            ],
                            "created_at": "2026-01-24T10:00:00+00:00"
                          },
                          "is_new_user": false,
                          "has_driver_profile": false
                        },
                        "meta": {
                          "token": "1|abc123...",
                          "token_type": "Bearer"
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "user": {
                              "type": "object",
                              "properties": {
                                "uuid": {
                                  "type": "string",
                                  "example": "550e8400-e29b-41d4-a716-446655440000"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "John Doe"
                                },
                                "email": {
                                  "type": "string",
                                  "example": "john@example.com"
                                },
                                "phone": {
                                  "type": "string",
                                  "example": "+12025551234"
                                },
                                "avatar": {
                                  "type": "string",
                                  "example": null
                                },
                                "locale": {
                                  "type": "string",
                                  "example": "en"
                                },
                                "timezone": {
                                  "type": "string",
                                  "example": "America/New_York"
                                },
                                "phone_verified": {
                                  "type": "boolean",
                                  "example": true
                                },
                                "email_verified": {
                                  "type": "boolean",
                                  "example": false
                                },
                                "roles": {
                                  "type": "array",
                                  "example": [
                                    "passenger"
                                  ],
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "created_at": {
                                  "type": "string",
                                  "example": "2026-01-24T10:00:00+00:00"
                                }
                              }
                            },
                            "is_new_user": {
                              "type": "boolean",
                              "example": false
                            },
                            "has_driver_profile": {
                              "type": "boolean",
                              "example": false
                            }
                          }
                        },
                        "meta": {
                          "type": "object",
                          "properties": {
                            "token": {
                              "type": "string",
                              "example": "1|abc123..."
                            },
                            "token_type": {
                              "type": "string",
                              "example": "Bearer"
                            }
                          }
                        }
                      }
                    },
                    {
                      "description": "Success - new user",
                      "type": "object",
                      "example": {
                        "success": true,
                        "data": {
                          "user": {
                            "uuid": "550e8400-e29b-41d4-a716-446655440000",
                            "name": "User",
                            "email": null,
                            "phone": "+12025551234",
                            "avatar": null,
                            "locale": "en",
                            "timezone": null,
                            "phone_verified": true,
                            "email_verified": false,
                            "roles": [
                              "passenger"
                            ],
                            "created_at": "2026-01-24T10:00:00+00:00"
                          },
                          "is_new_user": true,
                          "has_driver_profile": false
                        },
                        "meta": {
                          "token": "1|abc123...",
                          "token_type": "Bearer"
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "user": {
                              "type": "object",
                              "properties": {
                                "uuid": {
                                  "type": "string",
                                  "example": "550e8400-e29b-41d4-a716-446655440000"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "User"
                                },
                                "email": {
                                  "type": "string",
                                  "example": null
                                },
                                "phone": {
                                  "type": "string",
                                  "example": "+12025551234"
                                },
                                "avatar": {
                                  "type": "string",
                                  "example": null
                                },
                                "locale": {
                                  "type": "string",
                                  "example": "en"
                                },
                                "timezone": {
                                  "type": "string",
                                  "example": null
                                },
                                "phone_verified": {
                                  "type": "boolean",
                                  "example": true
                                },
                                "email_verified": {
                                  "type": "boolean",
                                  "example": false
                                },
                                "roles": {
                                  "type": "array",
                                  "example": [
                                    "passenger"
                                  ],
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "created_at": {
                                  "type": "string",
                                  "example": "2026-01-24T10:00:00+00:00"
                                }
                              }
                            },
                            "is_new_user": {
                              "type": "boolean",
                              "example": true
                            },
                            "has_driver_profile": {
                              "type": "boolean",
                              "example": false
                            }
                          }
                        },
                        "meta": {
                          "type": "object",
                          "properties": {
                            "token": {
                              "type": "string",
                              "example": "1|abc123..."
                            },
                            "token_type": {
                              "type": "string",
                              "example": "Bearer"
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "description": "Invalid code",
                      "type": "object",
                      "example": {
                        "success": false,
                        "message": "Invalid code. 4 attempts remaining."
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": false
                        },
                        "message": {
                          "type": "string",
                          "example": "Invalid code. 4 attempts remaining."
                        }
                      }
                    },
                    {
                      "description": "Expired code",
                      "type": "object",
                      "example": {
                        "success": false,
                        "message": "No active verification code found. Please request a new one."
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": false
                        },
                        "message": {
                          "type": "string",
                          "example": "No active verification code found. Please request a new one."
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "phone": {
                    "type": "string",
                    "description": "Phone number in US format (+1XXXXXXXXXX).",
                    "example": "+12025551234"
                  },
                  "code": {
                    "type": "string",
                    "description": "6-digit OTP code.",
                    "example": "123456"
                  },
                  "app_type": {
                    "type": "string",
                    "description": "Application type: `passenger` or `driver`. Defaults to `passenger`.",
                    "example": "passenger"
                  },
                  "device_name": {
                    "type": "string",
                    "description": "Device name for token identification.",
                    "example": "iPhone 15 Pro"
                  }
                },
                "required": [
                  "phone",
                  "code"
                ]
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "summary": "Logout",
        "operationId": "logout",
        "description": "Revoke the current authentication token.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "message": "Logged out successfully"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Logged out successfully"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Unauthenticated"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthenticated"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Authentication"
        ]
      }
    },
    "/api/v1/auth/logout-all": {
      "post": {
        "summary": "Logout from all devices",
        "operationId": "logoutFromAllDevices",
        "description": "Revoke all authentication tokens for the current user.\nThis will log the user out from all devices.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "message": "Logged out from all devices"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Logged out from all devices"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Unauthenticated"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthenticated"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Authentication"
        ]
      }
    },
    "/api/v1/passenger/register": {
      "post": {
        "summary": "Complete registration",
        "operationId": "completeRegistration",
        "description": "Complete the passenger registration by providing name and optional email.\nThis should be called after OTP verification for new users.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "user": {
                        "uuid": "550e8400-e29b-41d4-a716-446655440000",
                        "name": "John Doe",
                        "email": "john@example.com",
                        "phone": "+12025551234",
                        "avatar": null,
                        "locale": "en",
                        "timezone": null,
                        "phone_verified": true,
                        "email_verified": false,
                        "roles": [
                          "passenger"
                        ],
                        "created_at": "2026-01-24T10:00:00+00:00"
                      },
                      "message": "Registration completed"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "name": {
                              "type": "string",
                              "example": "John Doe"
                            },
                            "email": {
                              "type": "string",
                              "example": "john@example.com"
                            },
                            "phone": {
                              "type": "string",
                              "example": "+12025551234"
                            },
                            "avatar": {
                              "type": "string",
                              "example": null
                            },
                            "locale": {
                              "type": "string",
                              "example": "en"
                            },
                            "timezone": {
                              "type": "string",
                              "example": null
                            },
                            "phone_verified": {
                              "type": "boolean",
                              "example": true
                            },
                            "email_verified": {
                              "type": "boolean",
                              "example": false
                            },
                            "roles": {
                              "type": "array",
                              "example": [
                                "passenger"
                              ],
                              "items": {
                                "type": "string"
                              }
                            },
                            "created_at": {
                              "type": "string",
                              "example": "2026-01-24T10:00:00+00:00"
                            }
                          }
                        },
                        "message": {
                          "type": "string",
                          "example": "Registration completed"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Validation failed",
                    "errors": {
                      "name": [
                        "The name field is required."
                      ],
                      "email": [
                        "The email has already been taken."
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed"
                    },
                    "errors": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "array",
                          "example": [
                            "The name field is required."
                          ],
                          "items": {
                            "type": "string"
                          }
                        },
                        "email": {
                          "type": "array",
                          "example": [
                            "The email has already been taken."
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Passenger"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Full name of the passenger.",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "description": "Email address (optional but recommended).",
                    "example": "john@example.com",
                    "nullable": true
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/passenger/profile": {
      "get": {
        "summary": "Get profile",
        "operationId": "getProfile",
        "description": "Retrieve the current passenger's profile information.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "user": {
                        "uuid": "550e8400-e29b-41d4-a716-446655440000",
                        "name": "John Doe",
                        "email": "john@example.com",
                        "phone": "+12025551234",
                        "avatar": "https://example.com/storage/avatars/abc123.jpg",
                        "locale": "en",
                        "timezone": "America/New_York",
                        "phone_verified": true,
                        "email_verified": true,
                        "roles": [
                          "passenger"
                        ],
                        "created_at": "2026-01-24T10:00:00+00:00"
                      }
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "name": {
                              "type": "string",
                              "example": "John Doe"
                            },
                            "email": {
                              "type": "string",
                              "example": "john@example.com"
                            },
                            "phone": {
                              "type": "string",
                              "example": "+12025551234"
                            },
                            "avatar": {
                              "type": "string",
                              "example": "https://example.com/storage/avatars/abc123.jpg"
                            },
                            "locale": {
                              "type": "string",
                              "example": "en"
                            },
                            "timezone": {
                              "type": "string",
                              "example": "America/New_York"
                            },
                            "phone_verified": {
                              "type": "boolean",
                              "example": true
                            },
                            "email_verified": {
                              "type": "boolean",
                              "example": true
                            },
                            "roles": {
                              "type": "array",
                              "example": [
                                "passenger"
                              ],
                              "items": {
                                "type": "string"
                              }
                            },
                            "created_at": {
                              "type": "string",
                              "example": "2026-01-24T10:00:00+00:00"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Passenger"
        ]
      },
      "put": {
        "summary": "Update profile",
        "operationId": "updateProfile",
        "description": "Update the passenger's profile information.\nAll fields are optional - only provided fields will be updated.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "user": {
                        "uuid": "550e8400-e29b-41d4-a716-446655440000",
                        "name": "Jane Doe",
                        "email": "jane@example.com",
                        "phone": "+12025551234",
                        "avatar": "https://example.com/storage/avatars/new123.jpg",
                        "locale": "en",
                        "timezone": "America/New_York",
                        "phone_verified": true,
                        "email_verified": false,
                        "roles": [
                          "passenger"
                        ],
                        "created_at": "2026-01-24T10:00:00+00:00"
                      },
                      "message": "Profile updated"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "name": {
                              "type": "string",
                              "example": "Jane Doe"
                            },
                            "email": {
                              "type": "string",
                              "example": "jane@example.com"
                            },
                            "phone": {
                              "type": "string",
                              "example": "+12025551234"
                            },
                            "avatar": {
                              "type": "string",
                              "example": "https://example.com/storage/avatars/new123.jpg"
                            },
                            "locale": {
                              "type": "string",
                              "example": "en"
                            },
                            "timezone": {
                              "type": "string",
                              "example": "America/New_York"
                            },
                            "phone_verified": {
                              "type": "boolean",
                              "example": true
                            },
                            "email_verified": {
                              "type": "boolean",
                              "example": false
                            },
                            "roles": {
                              "type": "array",
                              "example": [
                                "passenger"
                              ],
                              "items": {
                                "type": "string"
                              }
                            },
                            "created_at": {
                              "type": "string",
                              "example": "2026-01-24T10:00:00+00:00"
                            }
                          }
                        },
                        "message": {
                          "type": "string",
                          "example": "Profile updated"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Email taken",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Validation failed",
                    "errors": {
                      "email": [
                        "The email has already been taken."
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed"
                    },
                    "errors": {
                      "type": "object",
                      "properties": {
                        "email": {
                          "type": "array",
                          "example": [
                            "The email has already been taken."
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Passenger"
        ],
        "requestBody": {
          "required": false,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Full name.",
                    "example": "Jane Doe"
                  },
                  "email": {
                    "type": "string",
                    "description": "Email address. Must be unique.",
                    "example": "jane@example.com",
                    "nullable": true
                  },
                  "avatar": {
                    "type": "string",
                    "format": "binary",
                    "description": "Profile picture. Max 2MB, image formats only.",
                    "nullable": true
                  },
                  "locale": {
                    "type": "string",
                    "description": "Preferred language (en, es, ru).",
                    "example": "en"
                  },
                  "timezone": {
                    "type": "string",
                    "description": "Timezone identifier.",
                    "example": "America/New_York"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/driver/register": {
      "post": {
        "summary": "Register as driver",
        "operationId": "registerAsDriver",
        "description": "Submit a driver application. The driver must be at least 21 years old\nand have a valid driver's license. After submission, documents need to\nbe uploaded and the application will be reviewed by an admin.",
        "parameters": [],
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "driver": {
                        "uuid": "550e8400-e29b-41d4-a716-446655440000",
                        "status": "pending",
                        "status_label": "Pending",
                        "date_of_birth": "1990-05-15",
                        "age": 35,
                        "gender": "M",
                        "gender_label": "Male",
                        "license_number": "DL123456789",
                        "license_expires_at": "2028-01-15",
                        "is_license_expired": false,
                        "rating": 0,
                        "total_trips": 0,
                        "completed_trips": 0,
                        "is_available": false,
                        "is_active": true,
                        "created_at": "2026-01-24T10:00:00+00:00"
                      },
                      "message": "Driver application submitted. Please upload required documents.",
                      "next_steps": [
                        "Upload required documents (passport, medical certificate, background check, insurance)",
                        "Wait for admin review",
                        "You will be notified when your application is approved"
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "driver": {
                          "type": "object",
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "status": {
                              "type": "string",
                              "example": "pending"
                            },
                            "status_label": {
                              "type": "string",
                              "example": "Pending"
                            },
                            "date_of_birth": {
                              "type": "string",
                              "example": "1990-05-15"
                            },
                            "age": {
                              "type": "integer",
                              "example": 35
                            },
                            "gender": {
                              "type": "string",
                              "example": "M"
                            },
                            "gender_label": {
                              "type": "string",
                              "example": "Male"
                            },
                            "license_number": {
                              "type": "string",
                              "example": "DL123456789"
                            },
                            "license_expires_at": {
                              "type": "string",
                              "example": "2028-01-15"
                            },
                            "is_license_expired": {
                              "type": "boolean",
                              "example": false
                            },
                            "rating": {
                              "type": "number",
                              "example": 0
                            },
                            "total_trips": {
                              "type": "integer",
                              "example": 0
                            },
                            "completed_trips": {
                              "type": "integer",
                              "example": 0
                            },
                            "is_available": {
                              "type": "boolean",
                              "example": false
                            },
                            "is_active": {
                              "type": "boolean",
                              "example": true
                            },
                            "created_at": {
                              "type": "string",
                              "example": "2026-01-24T10:00:00+00:00"
                            }
                          }
                        },
                        "message": {
                          "type": "string",
                          "example": "Driver application submitted. Please upload required documents."
                        },
                        "next_steps": {
                          "type": "array",
                          "example": [
                            "Upload required documents (passport, medical certificate, background check, insurance)",
                            "Wait for admin review",
                            "You will be notified when your application is approved"
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Already registered",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "You already have a driver profile"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "You already have a driver profile"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Age validation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Validation failed",
                    "errors": {
                      "date_of_birth": [
                        "You must be at least 21 years old to register as a driver."
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed"
                    },
                    "errors": {
                      "type": "object",
                      "properties": {
                        "date_of_birth": {
                          "type": "array",
                          "example": [
                            "You must be at least 21 years old to register as a driver."
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Driver"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Full name.",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "description": "Email address.",
                    "example": "john.driver@example.com"
                  },
                  "date_of_birth": {
                    "type": "date",
                    "description": "Date of birth (must be 21+ years old).",
                    "example": "1990-05-15"
                  },
                  "gender": {
                    "type": "string",
                    "description": "Gender (M or F).",
                    "example": "M",
                    "nullable": true
                  },
                  "address": {
                    "type": "string",
                    "description": "Home address.",
                    "example": "123 Main St, New York, NY 10001",
                    "nullable": true
                  },
                  "city_id": {
                    "type": "integer",
                    "description": "City ID from the cities list.",
                    "example": 11,
                    "nullable": true
                  },
                  "license_number": {
                    "type": "string",
                    "description": "Driver's license number.",
                    "example": "DL123456789"
                  },
                  "license_class": {
                    "type": "string",
                    "description": "License class (e.g., C, D).",
                    "example": "C",
                    "nullable": true
                  },
                  "license_issued_at": {
                    "type": "date",
                    "description": "Date when license was issued.",
                    "example": "2020-01-15",
                    "nullable": true
                  },
                  "license_expires_at": {
                    "type": "date",
                    "description": "License expiration date (must be in the future).",
                    "example": "2028-01-15"
                  },
                  "license_front_photo": {
                    "type": "string",
                    "format": "binary",
                    "description": "Front photo of driver's license. Max 5MB."
                  },
                  "license_back_photo": {
                    "type": "string",
                    "format": "binary",
                    "description": "Back photo of driver's license. Max 5MB."
                  },
                  "fleet_code": {
                    "type": "string",
                    "description": "Fleet UUID to join an existing fleet.",
                    "example": "550e8400-e29b-41d4-a716-446655440000",
                    "nullable": true
                  }
                },
                "required": [
                  "name",
                  "email",
                  "date_of_birth",
                  "license_number",
                  "license_expires_at",
                  "license_front_photo",
                  "license_back_photo"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/driver/profile": {
      "get": {
        "summary": "Get profile",
        "operationId": "getProfile",
        "description": "Retrieve the driver's profile including user info, driver details,\nfleet association, vehicles, and documents.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "user": {
                        "uuid": "550e8400-e29b-41d4-a716-446655440000",
                        "name": "John Doe",
                        "email": "john.driver@example.com",
                        "phone": "+12025551234",
                        "roles": [
                          "driver"
                        ]
                      },
                      "driver": {
                        "uuid": "660e8400-e29b-41d4-a716-446655440000",
                        "status": "approved",
                        "status_label": "Approved",
                        "date_of_birth": "1990-05-15",
                        "age": 35,
                        "rating": 4.85,
                        "total_trips": 150,
                        "completed_trips": 145,
                        "is_available": true,
                        "is_active": true,
                        "fleet": {
                          "uuid": "770e8400-e29b-41d4-a716-446655440000",
                          "name": "City Taxi Co"
                        },
                        "city": {
                          "id": 1,
                          "name": "New York"
                        }
                      }
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "name": {
                              "type": "string",
                              "example": "John Doe"
                            },
                            "email": {
                              "type": "string",
                              "example": "john.driver@example.com"
                            },
                            "phone": {
                              "type": "string",
                              "example": "+12025551234"
                            },
                            "roles": {
                              "type": "array",
                              "example": [
                                "driver"
                              ],
                              "items": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "driver": {
                          "type": "object",
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "example": "660e8400-e29b-41d4-a716-446655440000"
                            },
                            "status": {
                              "type": "string",
                              "example": "approved"
                            },
                            "status_label": {
                              "type": "string",
                              "example": "Approved"
                            },
                            "date_of_birth": {
                              "type": "string",
                              "example": "1990-05-15"
                            },
                            "age": {
                              "type": "integer",
                              "example": 35
                            },
                            "rating": {
                              "type": "number",
                              "example": 4.85
                            },
                            "total_trips": {
                              "type": "integer",
                              "example": 150
                            },
                            "completed_trips": {
                              "type": "integer",
                              "example": 145
                            },
                            "is_available": {
                              "type": "boolean",
                              "example": true
                            },
                            "is_active": {
                              "type": "boolean",
                              "example": true
                            },
                            "fleet": {
                              "type": "object",
                              "properties": {
                                "uuid": {
                                  "type": "string",
                                  "example": "770e8400-e29b-41d4-a716-446655440000"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "City Taxi Co"
                                }
                              }
                            },
                            "city": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer",
                                  "example": 1
                                },
                                "name": {
                                  "type": "string",
                                  "example": "New York"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No driver profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Driver profile not found"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Driver profile not found"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Driver"
        ]
      },
      "put": {
        "summary": "Update profile",
        "operationId": "updateProfile",
        "description": "Update driver's profile information. Only address and city can be updated.\nLicense and personal information changes require admin approval.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "driver": {
                        "uuid": "550e8400-e29b-41d4-a716-446655440000",
                        "status": "approved",
                        "address": "456 Oak Ave, Brooklyn, NY 11201"
                      },
                      "message": "Profile updated"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "driver": {
                          "type": "object",
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "status": {
                              "type": "string",
                              "example": "approved"
                            },
                            "address": {
                              "type": "string",
                              "example": "456 Oak Ave, Brooklyn, NY 11201"
                            }
                          }
                        },
                        "message": {
                          "type": "string",
                          "example": "Profile updated"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No driver profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Driver profile not found"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Driver profile not found"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Driver"
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "address": {
                    "type": "string",
                    "description": "Home address.",
                    "example": "456 Oak Ave, Brooklyn, NY 11201"
                  },
                  "city_id": {
                    "type": "integer",
                    "description": "City ID from the cities list.",
                    "example": 11
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/driver/status": {
      "get": {
        "summary": "Get verification status",
        "operationId": "getVerificationStatus",
        "description": "Get the current verification status of the driver application,\nincluding missing documents and next steps.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "description": "Has profile - pending",
                      "type": "object",
                      "example": {
                        "success": true,
                        "data": {
                          "has_profile": true,
                          "status": "pending",
                          "status_label": "Pending",
                          "is_approved": false,
                          "can_accept_trips": false,
                          "rejection_reason": null,
                          "verified_at": null,
                          "validation": {
                            "ready_for_submission": false,
                            "message": "Missing required documents"
                          },
                          "documents": {
                            "missing": [
                              "passport",
                              "medical_certificate"
                            ],
                            "unapproved": []
                          },
                          "next_steps": [
                            "Upload all required documents",
                            "Submit for review when ready"
                          ]
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "has_profile": {
                              "type": "boolean",
                              "example": true
                            },
                            "status": {
                              "type": "string",
                              "example": "pending"
                            },
                            "status_label": {
                              "type": "string",
                              "example": "Pending"
                            },
                            "is_approved": {
                              "type": "boolean",
                              "example": false
                            },
                            "can_accept_trips": {
                              "type": "boolean",
                              "example": false
                            },
                            "rejection_reason": {
                              "type": "string",
                              "example": null
                            },
                            "verified_at": {
                              "type": "string",
                              "example": null
                            },
                            "validation": {
                              "type": "object",
                              "properties": {
                                "ready_for_submission": {
                                  "type": "boolean",
                                  "example": false
                                },
                                "message": {
                                  "type": "string",
                                  "example": "Missing required documents"
                                }
                              }
                            },
                            "documents": {
                              "type": "object",
                              "properties": {
                                "missing": {
                                  "type": "array",
                                  "example": [
                                    "passport",
                                    "medical_certificate"
                                  ],
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "unapproved": {
                                  "type": "array",
                                  "example": []
                                }
                              }
                            },
                            "next_steps": {
                              "type": "array",
                              "example": [
                                "Upload all required documents",
                                "Submit for review when ready"
                              ],
                              "items": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    },
                    {
                      "description": "Has profile - approved",
                      "type": "object",
                      "example": {
                        "success": true,
                        "data": {
                          "has_profile": true,
                          "status": "approved",
                          "status_label": "Approved",
                          "is_approved": true,
                          "can_accept_trips": true,
                          "rejection_reason": null,
                          "verified_at": "2026-01-20T10:00:00+00:00",
                          "validation": {
                            "ready_for_submission": true,
                            "message": "All requirements met"
                          },
                          "documents": {
                            "missing": [],
                            "unapproved": []
                          },
                          "next_steps": [
                            "You are approved! Set yourself as available to receive trips"
                          ]
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "has_profile": {
                              "type": "boolean",
                              "example": true
                            },
                            "status": {
                              "type": "string",
                              "example": "approved"
                            },
                            "status_label": {
                              "type": "string",
                              "example": "Approved"
                            },
                            "is_approved": {
                              "type": "boolean",
                              "example": true
                            },
                            "can_accept_trips": {
                              "type": "boolean",
                              "example": true
                            },
                            "rejection_reason": {
                              "type": "string",
                              "example": null
                            },
                            "verified_at": {
                              "type": "string",
                              "example": "2026-01-20T10:00:00+00:00"
                            },
                            "validation": {
                              "type": "object",
                              "properties": {
                                "ready_for_submission": {
                                  "type": "boolean",
                                  "example": true
                                },
                                "message": {
                                  "type": "string",
                                  "example": "All requirements met"
                                }
                              }
                            },
                            "documents": {
                              "type": "object",
                              "properties": {
                                "missing": {
                                  "type": "array",
                                  "example": []
                                },
                                "unapproved": {
                                  "type": "array",
                                  "example": []
                                }
                              }
                            },
                            "next_steps": {
                              "type": "array",
                              "example": [
                                "You are approved! Set yourself as available to receive trips"
                              ],
                              "items": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    },
                    {
                      "description": "No profile",
                      "type": "object",
                      "example": {
                        "success": true,
                        "data": {
                          "has_profile": false,
                          "status": null,
                          "message": "No driver profile. Please register first."
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "has_profile": {
                              "type": "boolean",
                              "example": false
                            },
                            "status": {
                              "type": "string",
                              "example": null
                            },
                            "message": {
                              "type": "string",
                              "example": "No driver profile. Please register first."
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "Driver"
        ]
      }
    },
    "/api/v1/driver/submit-documents": {
      "post": {
        "summary": "Submit documents for review",
        "operationId": "submitDocumentsForReview",
        "description": "Submit the driver application for admin review. All required documents\nmust be uploaded before submission. Can also be used to resubmit after rejection.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "status": "documents_submitted",
                      "status_label": "Documents Submitted",
                      "message": "Your application has been submitted for review",
                      "next_steps": [
                        "Wait for admin to start review"
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "example": "documents_submitted"
                        },
                        "status_label": {
                          "type": "string",
                          "example": "Documents Submitted"
                        },
                        "message": {
                          "type": "string",
                          "example": "Your application has been submitted for review"
                        },
                        "next_steps": {
                          "type": "array",
                          "example": [
                            "Wait for admin to start review"
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "description": "Missing documents",
                      "type": "object",
                      "example": {
                        "success": false,
                        "message": "Missing documents: Passport, Medical Certificate",
                        "data": {
                          "missing_documents": [
                            "Passport",
                            "Medical Certificate"
                          ]
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": false
                        },
                        "message": {
                          "type": "string",
                          "example": "Missing documents: Passport, Medical Certificate"
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "missing_documents": {
                              "type": "array",
                              "example": [
                                "Passport",
                                "Medical Certificate"
                              ],
                              "items": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    },
                    {
                      "description": "Wrong status",
                      "type": "object",
                      "example": {
                        "success": false,
                        "message": "Cannot submit from current status. Current status: under_review"
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": false
                        },
                        "message": {
                          "type": "string",
                          "example": "Cannot submit from current status. Current status: under_review"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "No driver profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Driver profile not found. Please register as a driver first."
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Driver profile not found. Please register as a driver first."
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Driver"
        ]
      }
    },
    "/api/v1/device/token": {
      "post": {
        "summary": "Register device token",
        "operationId": "registerDeviceToken",
        "description": "Register or update a device token for push notifications.\nIf the token already exists for another user, it will be deactivated for them.\nIf the token already exists for the current user, it will be updated.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "description": "Success - new token",
                      "type": "object",
                      "example": {
                        "success": true,
                        "data": {
                          "device_token": {
                            "id": 1,
                            "platform": "ios",
                            "device_name": "iPhone 15 Pro",
                            "is_active": true
                          },
                          "message": "Device token registered"
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "device_token": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer",
                                  "example": 1
                                },
                                "platform": {
                                  "type": "string",
                                  "example": "ios"
                                },
                                "device_name": {
                                  "type": "string",
                                  "example": "iPhone 15 Pro"
                                },
                                "is_active": {
                                  "type": "boolean",
                                  "example": true
                                }
                              }
                            },
                            "message": {
                              "type": "string",
                              "example": "Device token registered"
                            }
                          }
                        }
                      }
                    },
                    {
                      "description": "Success - updated token",
                      "type": "object",
                      "example": {
                        "success": true,
                        "data": {
                          "device_token": {
                            "id": 1,
                            "platform": "android",
                            "device_name": "Pixel 8",
                            "is_active": true
                          },
                          "message": "Device token registered"
                        }
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "device_token": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer",
                                  "example": 1
                                },
                                "platform": {
                                  "type": "string",
                                  "example": "android"
                                },
                                "device_name": {
                                  "type": "string",
                                  "example": "Pixel 8"
                                },
                                "is_active": {
                                  "type": "boolean",
                                  "example": true
                                }
                              }
                            },
                            "message": {
                              "type": "string",
                              "example": "Device token registered"
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Invalid platform",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Validation failed",
                    "errors": {
                      "platform": [
                        "The selected platform is invalid."
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed"
                    },
                    "errors": {
                      "type": "object",
                      "properties": {
                        "platform": {
                          "type": "array",
                          "example": [
                            "The selected platform is invalid."
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Device"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "FCM/APNs device token.",
                    "example": "fcm_token_abc123..."
                  },
                  "platform": {
                    "type": "string",
                    "description": "Device platform: `ios`, `android`, or `web`.",
                    "example": "ios"
                  },
                  "device_name": {
                    "type": "string",
                    "description": "Optional device name for identification.",
                    "example": "iPhone 15 Pro",
                    "nullable": true
                  }
                },
                "required": [
                  "token",
                  "platform"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/device/token/{deviceToken_id}": {
      "delete": {
        "summary": "Remove device token",
        "operationId": "removeDeviceToken",
        "description": "Remove a device token to stop receiving push notifications on that device.\nUsers can only delete their own tokens.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "message": "Device token removed"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Device token removed"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not owner",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Unauthorized"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Resource not found"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Resource not found"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Device"
        ]
      },
      "parameters": [
        {
          "in": "path",
          "name": "deviceToken_id",
          "description": "The ID of the deviceToken.",
          "example": 11,
          "required": true,
          "schema": {
            "type": "integer"
          }
        },
        {
          "in": "path",
          "name": "deviceToken",
          "description": "The device token ID.",
          "example": 1,
          "required": true,
          "schema": {
            "type": "integer"
          }
        }
      ]
    },
    "/api/v1/driver/documents": {
      "get": {
        "summary": "List documents",
        "operationId": "listDocuments",
        "description": "Get all documents for the authenticated driver.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "documents": [
                        {
                          "id": 1,
                          "type": "passport",
                          "type_label": "Passport",
                          "status": "approved",
                          "status_label": "Approved",
                          "status_color": "success",
                          "file_url": "https://example.com/storage/driver-documents/abc123.jpg",
                          "document_number": "AB1234567",
                          "issued_at": "2020-01-15",
                          "expires_at": "2030-01-15",
                          "is_expired": false,
                          "is_expiring_soon": false,
                          "rejection_reason": null,
                          "verified_at": "2026-01-20T10:00:00+00:00",
                          "uploaded_at": "2026-01-15T10:00:00+00:00"
                        }
                      ],
                      "required_types": [
                        "passport",
                        "medical_certificate",
                        "background_check",
                        "insurance"
                      ],
                      "missing_types": [
                        "medical_certificate",
                        "insurance"
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "documents": {
                          "type": "array",
                          "example": [
                            {
                              "id": 1,
                              "type": "passport",
                              "type_label": "Passport",
                              "status": "approved",
                              "status_label": "Approved",
                              "status_color": "success",
                              "file_url": "https://example.com/storage/driver-documents/abc123.jpg",
                              "document_number": "AB1234567",
                              "issued_at": "2020-01-15",
                              "expires_at": "2030-01-15",
                              "is_expired": false,
                              "is_expiring_soon": false,
                              "rejection_reason": null,
                              "verified_at": "2026-01-20T10:00:00+00:00",
                              "uploaded_at": "2026-01-15T10:00:00+00:00"
                            }
                          ],
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "example": 1
                              },
                              "type": {
                                "type": "string",
                                "example": "passport"
                              },
                              "type_label": {
                                "type": "string",
                                "example": "Passport"
                              },
                              "status": {
                                "type": "string",
                                "example": "approved"
                              },
                              "status_label": {
                                "type": "string",
                                "example": "Approved"
                              },
                              "status_color": {
                                "type": "string",
                                "example": "success"
                              },
                              "file_url": {
                                "type": "string",
                                "example": "https://example.com/storage/driver-documents/abc123.jpg"
                              },
                              "document_number": {
                                "type": "string",
                                "example": "AB1234567"
                              },
                              "issued_at": {
                                "type": "string",
                                "example": "2020-01-15"
                              },
                              "expires_at": {
                                "type": "string",
                                "example": "2030-01-15"
                              },
                              "is_expired": {
                                "type": "boolean",
                                "example": false
                              },
                              "is_expiring_soon": {
                                "type": "boolean",
                                "example": false
                              },
                              "rejection_reason": {
                                "type": "string",
                                "example": null
                              },
                              "verified_at": {
                                "type": "string",
                                "example": "2026-01-20T10:00:00+00:00"
                              },
                              "uploaded_at": {
                                "type": "string",
                                "example": "2026-01-15T10:00:00+00:00"
                              }
                            }
                          }
                        },
                        "required_types": {
                          "type": "array",
                          "example": [
                            "passport",
                            "medical_certificate",
                            "background_check",
                            "insurance"
                          ],
                          "items": {
                            "type": "string"
                          }
                        },
                        "missing_types": {
                          "type": "array",
                          "example": [
                            "medical_certificate",
                            "insurance"
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No driver profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Driver profile not found. Please register as a driver first."
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Driver profile not found. Please register as a driver first."
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Driver Documents"
        ]
      },
      "post": {
        "summary": "Upload document",
        "operationId": "uploadDocument",
        "description": "Upload a new document for the authenticated driver.\nSupported types: passport, medical_certificate, background_check, insurance.\nIf a document of the same type already exists (pending or rejected), it will be replaced.",
        "parameters": [],
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "document": {
                        "id": 1,
                        "type": "passport",
                        "type_label": "Passport",
                        "status": "pending",
                        "status_label": "Pending",
                        "status_color": "warning",
                        "file_url": "https://example.com/storage/driver-documents/abc123.jpg",
                        "document_number": "AB1234567",
                        "issued_at": "2020-01-15",
                        "expires_at": "2030-01-15",
                        "is_expired": false,
                        "is_expiring_soon": false,
                        "rejection_reason": null,
                        "verified_at": null,
                        "uploaded_at": "2026-01-25T10:00:00+00:00"
                      },
                      "message": "Document uploaded successfully"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "document": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "integer",
                              "example": 1
                            },
                            "type": {
                              "type": "string",
                              "example": "passport"
                            },
                            "type_label": {
                              "type": "string",
                              "example": "Passport"
                            },
                            "status": {
                              "type": "string",
                              "example": "pending"
                            },
                            "status_label": {
                              "type": "string",
                              "example": "Pending"
                            },
                            "status_color": {
                              "type": "string",
                              "example": "warning"
                            },
                            "file_url": {
                              "type": "string",
                              "example": "https://example.com/storage/driver-documents/abc123.jpg"
                            },
                            "document_number": {
                              "type": "string",
                              "example": "AB1234567"
                            },
                            "issued_at": {
                              "type": "string",
                              "example": "2020-01-15"
                            },
                            "expires_at": {
                              "type": "string",
                              "example": "2030-01-15"
                            },
                            "is_expired": {
                              "type": "boolean",
                              "example": false
                            },
                            "is_expiring_soon": {
                              "type": "boolean",
                              "example": false
                            },
                            "rejection_reason": {
                              "type": "string",
                              "example": null
                            },
                            "verified_at": {
                              "type": "string",
                              "example": null
                            },
                            "uploaded_at": {
                              "type": "string",
                              "example": "2026-01-25T10:00:00+00:00"
                            }
                          }
                        },
                        "message": {
                          "type": "string",
                          "example": "Document uploaded successfully"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Already approved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "An approved document of this type already exists. Contact support to update it."
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "An approved document of this type already exists. Contact support to update it."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Validation failed",
                    "errors": {
                      "type": [
                        "The selected type is invalid."
                      ],
                      "file": [
                        "The file must be a file of type: jpg, jpeg, png, pdf."
                      ]
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed"
                    },
                    "errors": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "array",
                          "example": [
                            "The selected type is invalid."
                          ],
                          "items": {
                            "type": "string"
                          }
                        },
                        "file": {
                          "type": "array",
                          "example": [
                            "The file must be a file of type: jpg, jpeg, png, pdf."
                          ],
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Driver Documents"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "description": "Document type.",
                    "example": "passport"
                  },
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Document file (jpg, png, pdf). Max 10MB."
                  },
                  "document_number": {
                    "type": "string",
                    "description": "Optional document number.",
                    "example": "AB1234567",
                    "nullable": true
                  },
                  "issued_at": {
                    "type": "date",
                    "description": "Optional issue date (YYYY-MM-DD).",
                    "example": "2020-01-15",
                    "nullable": true
                  },
                  "expires_at": {
                    "type": "date",
                    "description": "Optional expiry date (YYYY-MM-DD).",
                    "example": "2030-01-15",
                    "nullable": true
                  }
                },
                "required": [
                  "type",
                  "file"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/driver/documents/{id}": {
      "delete": {
        "summary": "Delete document",
        "operationId": "deleteDocument",
        "description": "Delete a document. Only pending or rejected documents can be deleted.\nApproved documents cannot be deleted by the driver.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": true,
                    "data": {
                      "message": "Document deleted successfully"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Document deleted successfully"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "description": "Cannot delete approved",
                      "type": "object",
                      "example": {
                        "success": false,
                        "message": "Cannot delete an approved document"
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": false
                        },
                        "message": {
                          "type": "string",
                          "example": "Cannot delete an approved document"
                        }
                      }
                    },
                    {
                      "description": "Not owner",
                      "type": "object",
                      "example": {
                        "success": false,
                        "message": "Unauthorized"
                      },
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": false
                        },
                        "message": {
                          "type": "string",
                          "example": "Unauthorized"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "success": false,
                    "message": "Resource not found"
                  },
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Resource not found"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Driver Documents"
        ]
      },
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "description": "The ID of the document.",
          "example": 11,
          "required": true,
          "schema": {
            "type": "integer"
          }
        },
        {
          "in": "path",
          "name": "document",
          "description": "The document ID.",
          "example": 1,
          "required": true,
          "schema": {
            "type": "integer"
          }
        }
      ]
    }
  }
}